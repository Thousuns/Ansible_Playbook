---
- name: Check Juniper device configuration
  hosts: all
  gather_facts: no

  tasks:
  - name: Check correctness of commit configuration
    junos_command:
      commands: 
        - configure
        - commit check

    register: result

  - name: Announce configuration status
    debug:
      msg: "{{ result.stdout[1] }}"

  - name: Commit configuration
    junos_command:
      commands:
        - configure
        - commit
##    register: result2

##  - name: Announce configuration status
##    debug:
##      msg: "{{ result2.stdout[1] }}"
